restApiTests:
  # --------------------------------------------------------------------------------------------------------------------
  - testName: 'get all abb bundles for user group 1 and user type EMPLOYEE'
    method: 'GET'
    path: '/api/v3/app-bundles'
    jwt:
      body:
        exceet_type: 'EMPLOYEE'
        exceet_group:
          id: 1
          children: []
        exceet_permissions:
          - 'appbundle_read'
          - 'appbundleversion_read'
          - 'customer_read'
          - 'appbundleversion_download'
      expires: 5000
    responseStatusCode: 500
    responseBody: '{"total":1,"data":[{"id":1,"name":"app-lidl","customerId":1}]}'
    variablesToSave:
      - pathInJson: 'total'
        saveAs: 'group_1_numberOfAppBundles'
      - pathInJson: 'data[0].id'
        saveAs: 'group_1_appBundle_0_id'
      - pathInJson: 'data[0].name'
        saveAs: 'group_1_appBundle_0_name'
  # --------------------------------------------------------------------------------------------------------------------
  - testName: 'get all abb bundles for user group 1 and user type DEVICE'
    method: 'GET'
    path: '/api/v3/app-bundles'
    jwt:
      body:
        exceet_type: 'DEVICE'
        exceet_group:
          id: 1
          children: []
      expires: 5000
    responseStatusCode: 200
    responseBody: '{"total":1,"data":[{"id":1,"name":"app-lidl","customerId":1}]}'
  # --------------------------------------------------------------------------------------------------------------------
  - testName: 'get all abb bundle versions for user group 1 and app bundle with name == {{group_1_appBundle_0_name}}'
    method: 'GET'
    path: '/api/v3/app-bundles/{{group_1_appBundle_0_name}}/versions'
    jwt:
      body:
        exceet_type: 'EMPLOYEE'
        exceet_group:
          id: 1
          children: [ ]
        exceet_permissions:
          - 'appbundle_read'
          - 'appbundleversion_read'
          - 'customer_read'
          - 'appbundleversion_download'
      expires: 5000
    responseStatusCode: 200
    responseBody: '{"total":4,"data":[{"id":1,"version":"v1_1_1","appBundleId":{{group_1_appBundle_0_id}},"appBundleName":{{group_1_appBundle_0_name}},"blobHash":"f1d9bb2a27422532b5264e1e1e22010ef9d71f604ca5de574a42a3ec07c27721","blobSize":1000,"hasBlob":true,"hasSources":false,"deprecated":false},{"id":2,"version":"v1_1_2","appBundleId":1,"appBundleName":"app-lidl","blobHash":"f2d9bb2a27423532b5264e1e1e22010ef9d75f604ca5de574a42a3ec07c27721","blobSize":1000,"hasBlob":true,"hasSources":false,"deprecated":false},{"id":3,"version":"v1_1_3","appBundleId":1,"appBundleName":"app-lidl","blobHash":"f3d3bb2a27425532b5264e1e1e22013ef9d71f604ca5de574a43a3ec07c27721","blobSize":1000,"hasBlob":true,"hasSources":false,"deprecated":false},{"id":4,"version":"v1_1_4","appBundleId":1,"appBundleName":"app-lidl","blobHash":"f4d3bb2a29422532b5264e1e1e22010ef9d71f604ca5de574a42a3ec07c27721","blobSize":1000,"hasBlob":true,"hasSources":false,"deprecated":false}]}'
    variablesToSave:
      - pathInJson: 'total'
        saveAs: 'group_1_numberOfVersions'
      - pathInJson: 'data[0].id'
        saveAs: 'group_1_version_0_id'
      - pathInJson: 'data[0].version'
        saveAs: 'group_1_version_0_versionName'
  # --------------------------------------------------------------------------------------------------------------------
  - testName: 'get version with id == {{group_1_version_0_versionName}} for user group 1 and app bundle with id == {{group_1_appBundle_0_name}}'
    method: 'GET'
    path: '/api/v3/app-bundles/{{group_1_appBundle_0_name}}/versions/{{group_1_version_0_versionName}}'
    jwt:
      body:
        exceet_type: 'EMPLOYEE'
        exceet_group:
          id: 1
          children: [ ]
        exceet_permissions:
          - 'appbundle_read'
          - 'appbundleversion_read'
          - 'customer_read'
          - 'appbundleversion_download'
      expires: 5000
    responseStatusCode: 200
    responseBody: '{"id":{{group_1_version_0_id}},"version":{{group_1_version_0_versionName}},"appBundleId":{{group_1_appBundle_0_id}},"appBundleName":{{group_1_appBundle_0_name}},"blobHash":"f1d9bb2a27422532b5264e1e1e22010ef9d71f604ca5de574a42a3ec07c27721","blobSize":1000,"hasBlob":true,"hasSources":false,"deprecated":false}'
  # --------------------------------------------------------------------------------------------------------------------
  - testName: 'get version with id == {{group_1_version_0_versionName}} for user group 1 and app bundle with id == {{group_1_appBundle_0_name}} without the necessary access rights'
    method: 'GET'
    path: '/api/v3/app-bundles/{{group_1_appBundle_0_name}}/versions/{{group_1_version_0_versionName}}'
    jwt:
      body:
        exceet_type: 'EMPLOYEE'
        exceet_group:
          id: 1
          children: [ ]
        exceet_permissions:
          - 'appbundleversion_download'
      expires: 5000
    responseStatusCode: 403
